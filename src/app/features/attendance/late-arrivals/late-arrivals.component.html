<app-header></app-header>
<app-sidebar></app-sidebar>

<div class="dashboard-header">
  <h2 class="dashboard-title">Late Arrivals</h2>
  <nav class="breadcrumb">
    <a href="#">Home</a> &gt;
    <a href="#">HRMS</a> &gt;
    <span>Late Arrivals</span>
  </nav>
</div>

<div class="tab-container mt-4">
<div class="card p-4 shadow-sm">

  <h5 class="mb-3">Late Arrivals</h5>

  <!-- FILTER FORM -->
  <form class="row g-3 mb-4"
        [formGroup]="filterForm"
        (ngSubmit)="onFilter()">

    <div class="col-md-4">
      <label class="form-label">Select Employee</label>
      <select class="form-select" formControlName="employeeCode">
          <option value="">All Employees</option>
          <option *ngFor="let emp of employees" [value]="emp.employeeCode">
            {{ emp.fullName }} ({{ emp.employeeCode }})
          </option>
        </select>
    </div>

    <div class="col-md-3">
      <label class="form-label">From Date</label>
      <input type="date" class="form-control" formControlName="fromDate">
    </div>

    <div class="col-md-3">
      <label class="form-label">To Date</label>
      <input type="date" class="form-control" formControlName="toDate">
    </div>

    <div class="col-md-2 d-flex align-items-end">
      <button type="submit" class="btn btn-primary w-100">
        Filter
      </button>
    </div>

  </form>

  <!-- TABLE -->
  <div class="table-responsive">
    <table class="table table-bordered table-hover align-middle">
      <thead class="table-light">
        <tr>
          <th>Employee Name</th>
          <th>Employee ID</th>
          <th>Date</th>
          <th>Shift Start</th>
          <th>Allowed In</th>
          <th>Clock In</th>
          <th>Late By</th>
          <th>Status</th>
        </tr>
      </thead>

      <tbody>
        <tr *ngFor="let r of lateArrivals">
          <td>{{ r.employeeName }}</td>
          <td>{{ r.employeeCode }}</td>
          <td>{{ r.attendanceDate | date:'yyyy-MM-dd' }}</td>
          <td>{{ r.shiftStartTime }}</td>
          <td>{{ r.allowedClockInTime }}</td>
          <td>{{ r.clockInTime }}</td>
          <td>{{ r.lateByMinutes }} mins</td>
          <td>
            <span class="badge bg-danger">Late</span>
          </td>
        </tr>

        <tr *ngIf="!loading && lateArrivals.length === 0">
          <td colspan="8" class="text-center text-muted">
            No late arrivals found
          </td>
        </tr>

        <tr *ngIf="loading">
          <td colspan="8" class="text-center">
            Loading...
          </td>
        </tr>
      </tbody>

    </table>
  </div>

</div>
</div>

<app-footer></app-footer>
